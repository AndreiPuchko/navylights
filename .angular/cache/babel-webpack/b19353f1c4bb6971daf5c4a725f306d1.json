{"ast":null,"code":"import _asyncToGenerator from \"/home/a/Desktop/dev/navylights/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl } from '@angular/forms';\nimport { startWith, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-cookie-service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/autocomplete\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/core\";\nconst _c0 = [\"canvas\"];\nconst _c1 = [\"navylight\"];\nconst _c2 = [\"errortext\"];\n\nfunction AppComponent_mat_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r5, \" \");\n  }\n} // import * as jison from \"jison\";\n\n\nclass Light {\n  constructor(color, timeOn) {\n    this.color = color;\n    this.timeOn = timeOn;\n  }\n\n}\n\nclass FlashCount {\n  constructor() {\n    this.list = [];\n  }\n\n  sumFlash() {\n    return this.list.reduce((sum, cur) => sum + cur, 0);\n  }\n\n}\n\nexport class AppComponent {\n  constructor(cookieService, http) {\n    this.cookieService = cookieService;\n    this.http = http;\n    this.title = 'navylights';\n    this.navytext = '';\n    this.tmpText = \"\";\n    this.showing = \"\";\n    this.cookiesLights = [];\n    this.defaultLights = ['VQ(6)LFL10S', 'VQ(9)10S', 'VQ(3)5S', 'VQ', 'ALWRW4S', 'Iso W 6s ', 'Fl (1+4+3)W 45s', 'Fl(1+2)R', 'FL(2)5S', 'VQ(2+1)', 'ALWR4S'];\n    this.navyTextControl = new FormControl();\n    this.showRainControl = new FormControl();\n    this.lightRadiusControl = new FormControl();\n    this.rainDrops = [];\n  }\n\n  initRain() {\n    var qtRainDrops = 300;\n    var w = window.innerWidth;\n    var h = window.innerHeight;\n\n    for (var a = 0; a < qtRainDrops; a++) {\n      this.rainDrops[a] = {\n        x: Math.random() * w,\n        y: Math.random() * h,\n        l: Math.random() * 3,\n        xs: -4 + Math.random() * 4 + 2,\n        ys: Math.random() * 10 + 10\n      };\n    }\n  }\n\n  startRain() {\n    if (this.showRainControl.value === true) {\n      this.rainInterval = setInterval(() => {\n        this.drawRain();\n      }, 30);\n    }\n  }\n\n  stopRain() {\n    clearInterval(this.rainInterval);\n  }\n\n  onRainCheck() {\n    var w = window.innerWidth;\n    var h = window.innerHeight;\n    this.ctx.clearRect(0, 0, w, h); // if (this.showRainControl.value === true && this.showing === \"Yes\"){\n    //   this.startRain();\n    // }\n  }\n\n  drawRain() {\n    var w = window.innerWidth;\n    var h = window.innerHeight;\n    this.ctx.clearRect(0, 0, w, h);\n\n    for (var c = 0; c < this.rainDrops.length; c++) {\n      var p = this.rainDrops[c]; // this.ctx.fillStyle = \"white\"\n      // this.ctx.fillRect(p.x, p.y, 5, 5)\n\n      this.ctx.lineWidth = 2;\n      this.ctx.strokeStyle = \"white\";\n      this.ctx.beginPath();\n      this.ctx.moveTo(p.x, p.y);\n      this.ctx.lineTo(p.x + p.l * p.xs, p.y + p.l * p.ys);\n      this.ctx.fill();\n      this.ctx.stroke();\n    } // Move drops\n\n\n    for (var b = 0; b < this.rainDrops.length; b++) {\n      var p = this.rainDrops[b];\n      p.x += p.xs;\n      p.y += p.ys;\n\n      if (p.x > w || p.y > h) {\n        p.x = Math.random() * w;\n        p.y = -20;\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.ctx = this.canvas.nativeElement.getContext(\"2d\");\n    this.canvas.nativeElement.width = window.innerWidth;\n    this.canvas.nativeElement.height = window.innerHeight;\n    this.initRain();\n    this.navyTextControl.setValue(this.defaultLights[0]);\n    this.navyTextControl.setValue(\"VQRY(6+2)LFlBUOR(3+1). 10s\");\n    this.lightRadiusControl.setValue(25);\n\n    for (let i = 0; i < this.defaultLights.length; i++) {\n      this.navytext = this.defaultLights[i];\n      this.putCookie();\n    }\n\n    this.filteredCookiesLights = this.navyTextControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\n  }\n\n  _filter(value) {\n    const filterValue = value.toUpperCase();\n    return this.cookiesLights.filter(cookiesLights => cookiesLights.includes(filterValue));\n  }\n\n  onStop() {\n    this.stopRain();\n    this.showing = \"\";\n    this.navyTextControl.enable();\n    this.lightRadiusControl.enable();\n    this.showRainControl.enable();\n  }\n\n  onClear() {\n    this.showing = \"\";\n    this.navyTextControl.setValue(\"\");\n    this.showError(\"\");\n  }\n\n  showError(text) {\n    this.errortext.nativeElement.innerHTML = text;\n  }\n\n  blink(color, delay = 0) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.navylight.nativeElement.style.background = color;\n      yield _this.delay(delay);\n    })();\n  }\n\n  delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  putLog(serie) {\n    var serieText = \"[\" + this.navytext + \"]\";\n\n    for (let x = 0; x < serie.length; x++) {\n      serieText = serieText + serie[x].color.substr(0, 3).replace(\"bla\", \"ec\") + \":\" + Math.round(serie[x].timeOn) / 1000 + \",\";\n    } // console.log(serieText);\n\n\n    serieText = encodeURIComponent(serieText);\n    this.http.get(window.location.href + \"/log/?log=\" + serieText, {\n      responseType: 'blob'\n    }).subscribe(data => {\n      console.log(\"\");\n    });\n  } // show lights\n\n\n  show(serie) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.putCookie();\n\n      _this2.putLog(serie);\n\n      _this2.showing = \"Yes\";\n\n      _this2.navyTextControl.disable();\n\n      _this2.lightRadiusControl.disable();\n\n      _this2.showRainControl.disable(); // console.log(serie);\n\n\n      _this2.startRain();\n\n      while (_this2.showing === \"Yes\") {\n        for (let x = 0; x < serie.length; x++) {\n          console.log(x, serie[x]);\n          yield _this2.blink(serie[x].color, serie[x].timeOn);\n          if (_this2.showing != \"Yes\") break;\n        }\n\n        console.log(\"end of serie\");\n        if (_this2.showing != \"Yes\") break;\n      }\n\n      _this2.blink(\"black\", 1);\n    })();\n  }\n\n  getColor() {\n    let colorMap = new Map();\n    colorMap.set(\"Y\", \"yellow\");\n    colorMap.set(\"OR\", \"orange\");\n    colorMap.set(\"W\", \"white\");\n    colorMap.set(\"R\", \"red\");\n    colorMap.set(\"G\", \"green\");\n    colorMap.set(\"BU\", \"blue\");\n    colorMap.set(\"VI\", \"violet\");\n    let colorList = new Map();\n    let color = new Array();\n    this.cutLeadingSeparators(); //make colors sequence\n\n    let z = [...colorMap.keys()];\n\n    for (let i = 0; i < z.length; i++) {\n      var pos = 0;\n\n      while (this.tmpText.indexOf(z[i], pos) >= 0) {\n        colorList.set(this.tmpText.indexOf(z[i], pos), z[i]);\n        pos = this.tmpText.indexOf(z[i], pos) + 1;\n      }\n    } //remove colors\n\n\n    this.tmpText = this.tmpText.replace(/Y/gi, \"\");\n    this.tmpText = this.tmpText.replace(/OR/gi, \"\");\n    this.tmpText = this.tmpText.replace(/W/gi, \"\");\n    this.tmpText = this.tmpText.replace(/R/gi, \"\");\n    this.tmpText = this.tmpText.replace(/G/gi, \"\");\n    this.tmpText = this.tmpText.replace(/BU/gi, \"\");\n    this.tmpText = this.tmpText.replace(/VI/gi, \"\"); //sort \n\n    var colorSort = [...colorList.entries()].sort();\n\n    for (let i = 0; i < colorSort.length; i++) {\n      color.push(colorMap.get(colorSort[i][1]));\n      if (colorSort[i][1] === \"OR\") i++;\n    }\n\n    if (color.length === 0) {\n      color.push(\"white\");\n    }\n\n    return color;\n  }\n\n  getPeriod() {\n    let period = 0;\n    this.cutLeadingSeparators();\n\n    if (this.tmpText.endsWith(\"S\")) {\n      this.tmpText = this.tmpText.substr(0, this.tmpText.length - 1);\n      var lo = \"\";\n\n      while (/^\\d+$/.test(this.tmpText[this.tmpText.length - 1]) || this.tmpText[this.tmpText.length - 1] === '.') {\n        if (this.tmpText[this.tmpText.length - 1] === \".\") {\n          lo = this.tmpText[this.tmpText.length - 1] + lo;\n        }\n\n        this.tmpText = this.tmpText.substr(0, this.tmpText.length - 1);\n      }\n\n      if (lo != \"\") {\n        period = parseFloat(lo) * 1000;\n      }\n    }\n\n    return period;\n  }\n\n  cutLeadingSeparators() {\n    while (\"+[.\\+] \".indexOf(this.tmpText[0]) >= 0) {\n      this.tmpText = this.tmpText.substr(1);\n    }\n  }\n\n  getFlashType() {\n    let flashTypes = new Map();\n    flashTypes.set(\"Q\", 750);\n    flashTypes.set(\"FL\", 1200);\n    flashTypes.set(\"LFL\", 2000);\n    flashTypes.set(\"L.FL\", 2000);\n    flashTypes.set(\"VQ\", 600);\n    flashTypes.set(\"V.Q\", 600);\n    flashTypes.set(\"UQ\", 320);\n    flashTypes.set(\"U.Q\", 320);\n    flashTypes.set(\"OC\", 3000);\n    flashTypes.set(\"ISO\", 1000);\n    flashTypes.set(\"AL\", 1000);\n    flashTypes.set(\"F\", 1234);\n    this.cutLeadingSeparators(); // alert(\"-\"+this.tmpText)\n\n    for (let [key, value] of flashTypes) {\n      // console.log(key)\n      if (this.tmpText.startsWith(key)) {\n        this.tmpText = this.tmpText.substr((\"\" + key).length); // alert(\"!\"+this.tmpText)\n        // console.log(\"found key\"+key+\"-\"+this.tmpText)\n\n        var ec = value * 2;\n        if (key === \"OC\") ec = value / 4;\n        if (key === \"ISO\" || key === \"AL\") ec = value;\n        return [value, ec];\n      }\n    } // console.log(\"==\" + this.tmpText)\n\n\n    this.tmpText = this.tmpText.substr(1);\n    return [0, 0];\n  }\n\n  putCookie() {\n    let list = [];\n    var listString = this.cookieService.get(\"navylights\");\n\n    try {\n      list = JSON.parse(listString);\n      this.cookiesLights = list;\n    } catch (_a) {}\n\n    if (this.navytext != \"\" && list.indexOf(this.navytext) < 0) {\n      list.push(this.navytext);\n      this.cookieService.set(\"navylights\", JSON.stringify(list), 60, \"/\");\n      this.cookiesLights = list;\n    }\n  }\n\n  getFlashCount() {\n    let flashCount = new FlashCount();\n\n    if (this.tmpText.startsWith(\"(\")) {\n      var countStr = this.tmpText.substr(1, this.tmpText.indexOf(\")\") - 1);\n\n      if (countStr.indexOf(\")\") >= 0) {\n        this.showError(\"It has ( but does not have )\");\n        return flashCount;\n      } else if (countStr === \"\") {\n        flashCount.list.push(1);\n      } else {\n        for (var x = 0; x < countStr.split(\"+\").length; x++) {\n          flashCount.list.push(parseInt(countStr.split(\"+\")[x]));\n        }\n\n        this.tmpText = this.tmpText.substr(this.tmpText.indexOf(\")\") + 1);\n      }\n    } else {\n      flashCount.list.push(1);\n    }\n\n    return flashCount;\n  }\n\n  pushNextLight(lastLightList, listOfLights) {\n    if (lastLightList.length != 0) {\n      let light = new Map();\n      light.set(\"lightType\", lastLightList[0]);\n      light.set(\"lightColors\", this.getListOfColors(lastLightList));\n      light.set(\"lightGroups\", this.getListOfGroups(lastLightList));\n      listOfLights.push(light);\n\n      while (lastLightList.length != 0) {\n        //clear list\n        lastLightList.pop();\n      }\n    }\n  }\n\n  getListOfLights(tmpText) {\n    var reTypesOfLights = /(LFL|FL|OC|ISO|Al|VQ|UQ|HQ)/;\n    var listOfLights = [];\n    var lastLightList = [];\n\n    function pushNextLight() {\n      if (lastLightList.length != 0) {\n        listOfLights.push([lastLightList[0]]);\n        lastLightList = [];\n      }\n    }\n\n    tmpText.split(reTypesOfLights).forEach(element => {\n      if (element != \"\") {\n        if (element.match(reTypesOfLights)) {\n          this.pushNextLight(lastLightList, listOfLights);\n        }\n\n        lastLightList.push(element);\n      }\n    });\n    this.pushNextLight(lastLightList, listOfLights);\n    return listOfLights;\n  }\n\n  getListOfColors(lightString) {\n    var reColors = /(W|R|G|Y|OR|BU)/;\n    var listOfColors = [];\n    let colorMap = new Map();\n    colorMap.set(\"Y\", \"yellow\");\n    colorMap.set(\"OR\", \"orange\");\n    colorMap.set(\"W\", \"white\");\n    colorMap.set(\"R\", \"red\");\n    colorMap.set(\"G\", \"green\");\n    colorMap.set(\"BU\", \"blue\");\n    colorMap.set(\"VI\", \"violet\");\n\n    if (lightString.length < 2) {\n      //Single light? no color, no groups\n      // return listOfColors;\n      return [\"white\"];\n    }\n\n    lightString[1].split(reColors).forEach(element => {\n      if (element.match(reColors)) {\n        listOfColors.push(colorMap.get(element));\n      }\n    });\n    return listOfColors;\n  }\n\n  getListOfGroups(lightString) {\n    var listOfGroups = [];\n    var reGroups = /(\\b\\d+\\b)/;\n\n    if (lightString.length < 2) {\n      //Single light? no color, no groups\n      return listOfGroups;\n    }\n\n    lightString[1].split(reGroups).forEach(element => {\n      if (element.match(reGroups)) {\n        listOfGroups.push(element);\n      }\n    });\n    return listOfGroups;\n  }\n\n  newOnShow() {\n    this.navytext = this.navyTextControl.value.trim().toUpperCase();\n    var tmpNavyText = this.navytext.replace(/\\s/, \"\").replace(/\\./, \"\");\n    let serie = []; //Get period\n\n    var period = \"\";\n    const rePeriod = /[0-9]*S$/;\n    var isPeriod = tmpNavyText.match(rePeriod);\n\n    if (isPeriod != null) {\n      period = isPeriod[0];\n      tmpNavyText = tmpNavyText.replace(rePeriod, \"\");\n    } // Split to lights\n\n\n    var listOfLights = this.getListOfLights(tmpNavyText); //Build tree of lights\n\n    listOfLights.forEach(el => {\n      console.log(el.lightType); // serie.push(new Light(color[i], ltTime));\n      // serie.push(new Light(\"black\", ltTime));\n    });\n    console.log(period);\n  } // Show button pressed\n\n\n  onShow() {\n    this.newOnShow();\n    return;\n    let ra = this.lightRadiusControl.value;\n    this.navylight.nativeElement.style.borderRadius = ra + \"px\";\n    this.navylight.nativeElement.style.width = 2 * ra + \"px\";\n    this.navylight.nativeElement.style.height = 2 * ra + \"px\";\n    let serie = [];\n    let color = [];\n    let flashValue = [];\n    let flashCount = new FlashCount();\n    this.navytext = this.navyTextControl.value.trim().toUpperCase();\n    this.tmpText = this.navytext.replace(/\\s/g, \"\").replace(/\\./g, \"\");\n    this.showError(\"\");\n    var period = this.getPeriod(); //parse until empty string\n\n    while (this.tmpText != \"\") {\n      //for every non first section - duplicate period of black\n      if (serie.length > 0) {\n        serie.push(serie[serie.length - 1]);\n      } // console.log(this.tmpText);\n\n\n      flashValue = this.getFlashType();\n\n      if (flashValue[0] === 0 && flashValue[0] === 0) {\n        this.showError(\"Bad Light characteristic\" + this.tmpText);\n        return;\n      } // console.log(flashValue);\n\n\n      var ltTime = flashValue[0];\n      var ecTime = flashValue[1];\n\n      if (ltTime === 0) {\n        continue;\n      }\n\n      flashCount = this.getFlashCount(); // console.log(flashCount);\n\n      if (color.length === 0) {\n        color = this.getColor();\n      } // alert(flashCount.list.length);\n      // AL lights\n\n\n      if (this.navytext.startsWith(\"AL\") && color.length > 1) {\n        for (let z = 0; z < flashCount.list[0]; z++) {\n          for (let i = 0; i < color.length; i++) {\n            serie.push(new Light(color[i], ltTime));\n            serie.push(new Light(\"black\", ltTime));\n          }\n        }\n      } //fixed light\n      else if (ltTime === 1234) {\n        serie.push(new Light(color[0], ltTime));\n      } //Regular lights\n      else {\n        var realEcTime = ecTime;\n        var realLtTime = ltTime;\n        flashCount.sumFlash();\n\n        for (var z = 0; z < flashCount.list.length; z++) {\n          if (z > 0) {\n            // works for (2+1) etc\n            serie.push(new Light(\"black\", realEcTime * 2));\n\n            if (ltTime > ecTime) {\n              // for OC lights\n              serie.push(new Light(\"black\", 2 * realEcTime));\n            }\n          }\n\n          for (var i = 1; i <= flashCount.list[z]; i++) {\n            serie.push(new Light(color[0], realLtTime));\n            serie.push(new Light(\"black\", realEcTime / 3));\n          }\n        }\n      }\n    } // console.log(serie)\n\n\n    if (this.navytext.startsWith(\"ISO\") && period != 0 && serie.length === 2) {\n      serie[0].timeOn = serie[1].timeOn = period / 2;\n    } else {\n      //count total long of signals\n      var totalLong = 0;\n      serie.forEach(element => {\n        totalLong = totalLong + element.timeOn;\n      });\n\n      if (period != 0 && period < totalLong) {\n        // alert(\"Given period is less than total leght of signal\");\n        this.showError(\"The given period is less than the total length of signals\");\n        return;\n      } // if flashCount.sumFlash()>0 - must be a period\n\n\n      if (flashCount.sumFlash() > 1 && period == 0) {\n        period = totalLong * 1.5;\n      }\n\n      if (period > 0 && period <= totalLong) {\n        //serie too long - make it shorter\n        serie.forEach(element => {\n          element.timeOn = element.timeOn / (totalLong / (period / 2));\n        });\n        totalLong = totalLong / (totalLong / (period / 2));\n      }\n\n      if (period === 0 && serie.length > 2) {\n        //no period = fake period\n        period = totalLong;\n      }\n\n      if (period > totalLong) {\n        // append ec for period time\n        serie.push(new Light(\"black\", period - totalLong));\n      }\n    } // show serie\n\n\n    if (serie.length > 0) {\n      this.show(serie);\n    }\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.CookieService), i0.ɵɵdirectiveInject(i2.HttpClient));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  viewQuery: function AppComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.navylight = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.errortext = _t.first);\n    }\n  },\n  decls: 39,\n  vars: 10,\n  consts: [[\"id\", \"backgroundgif\"], [\"canvas\", \"\"], [1, \"align_center\"], [\"id\", \"circle\"], [\"navylight\", \"\"], [1, \"inputform\"], [\"type\", \"text\", \"id\", \"inputtext\", \"name\", \"navy\", \"size\", \"18\", 3, \"formControl\", \"matAutocomplete\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"disabled\", \"click\"], [\"id\", \"align_left\"], [\"for\", \"showrain\", \"size\", \"18\", 2, \"width\", \"1000px\"], [\"type\", \"checkbox\", \"id\", \"showrain\", \"name\", \"showrain\", \"size\", \"18\", 3, \"formControl\", \"click\"], [1, \"filler\"], [\"size\", \"18\", 2, \"width\", \"1000px\"], [\"type\", \"number\", \"min\", \"5\", \"max\", \"150\", \"required\", \"\", 3, \"formControl\"], [2, \"color\", \"red\", \"font-size\", \"large\"], [\"errortext\", \"\"], [1, \"align_right\"], [3, \"value\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\", 0);\n      i0.ɵɵelement(1, \"canvas\", null, 1);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵelement(4, \"div\", 3, 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 2);\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵelementStart(8, \"form\");\n      i0.ɵɵtext(9, \" Light characteristic: \");\n      i0.ɵɵelement(10, \"br\");\n      i0.ɵɵelement(11, \"br\");\n      i0.ɵɵelement(12, \"input\", 6);\n      i0.ɵɵelementStart(13, \"mat-autocomplete\", null, 7);\n      i0.ɵɵtemplate(15, AppComponent_mat_option_15_Template, 2, 2, \"mat-option\", 8);\n      i0.ɵɵpipe(16, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"br\");\n      i0.ɵɵelementStart(18, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_18_listener() {\n        return ctx.onShow();\n      });\n      i0.ɵɵtext(19, \"Show\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_20_listener() {\n        return ctx.onClear();\n      });\n      i0.ɵɵtext(21, \"Clear\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_22_listener() {\n        return ctx.onStop();\n      });\n      i0.ɵɵtext(23, \"Stop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"br\");\n      i0.ɵɵelement(25, \"br\");\n      i0.ɵɵelementStart(26, \"div\", 10);\n      i0.ɵɵelementStart(27, \"label\", 11);\n      i0.ɵɵtext(28, \"Show rain\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"input\", 12);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_input_click_29_listener() {\n        return ctx.onRainCheck();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"div\", 13);\n      i0.ɵɵelementStart(31, \"label\", 14);\n      i0.ɵɵtext(32, \"Radius of light\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"div\", 16, 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"footer\");\n      i0.ɵɵelementStart(37, \"div\", 18);\n      i0.ɵɵtext(38, \" \\u00A9 2021 Andrei Puchko \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(14);\n\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"formControl\", ctx.navyTextControl)(\"matAutocomplete\", _r2);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(16, 8, ctx.filteredCookiesLights));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.showing != \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.showing != \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.showing === \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formControl\", ctx.showRainControl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.lightRadiusControl);\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i4.MatAutocompleteTrigger, i3.NgControlStatus, i3.FormControlDirective, i4.MatAutocomplete, i5.NgForOf, i3.CheckboxControlValueAccessor, i3.MinValidator, i3.MaxValidator, i3.NumberValueAccessor, i3.RequiredValidator, i6.MatOption],\n  pipes: [i5.AsyncPipe],\n  styles: [\"body[_ngcontent-%COMP%] {\\n    background-color:black;\\n    color: white;\\n    font-size:26px;\\n    padding: 1px;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n    width:50%;\\n    margin: 10px;\\n}\\n\\n@media  (max-width: 1000px){\\n    input[_ngcontent-%COMP%] {\\n    width:90%;\\n    }\\n}\\n\\n\\n\\n\\n\\n\\n\\n#circle[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    margin: 10% 10px 10% 10px; \\n    width: 50px;\\n    height: 50px;\\n    \\n    border-radius: 25px;\\n    background: black;\\n}\\n\\nfooter[_ngcontent-%COMP%]{\\n    display: flex;\\n    position:fixed;\\n    font-size:0.8vw;\\n    bottom:0px;\\n    background-color:rgb(32, 32, 58);\\n    width:100%;\\n}\\n\\ncanvas[_ngcontent-%COMP%] { \\n    position: absolute;\\n    z-index: 1;\\n}\\n\\nbutton[_ngcontent-%COMP%]{\\n    height: 40px;\\n    width:30%;\\n    margin: 10px;\\n}\\n\\ninput[_ngcontent-%COMP%]{\\n    font-size: 20pt;\\n}\\n\\n.align_right[_ngcontent-%COMP%]{margin-left: auto;\\n    margin-right: 15px;\\n}\\n\\n.inputform[_ngcontent-%COMP%]{\\n    padding: 20px;\\n    padding-top: 40px;\\n    z-index: 2;\\n}\\n\\n.align_center[_ngcontent-%COMP%]{\\n    display: flex;\\n    max-width: 1000px;\\n    margin: auto;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.filler[_ngcontent-%COMP%] {\\n    flex-grow: 1;\\n  }\\n\\n#align_left[_ngcontent-%COMP%]{\\n    display: flex;\\n    width: 100%;\\n    justify-content: space-around;\\n    vertical-align:bottom;\\n    align-items: left;\\n}\\n\\n.align_center[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 60%;\\n    display: inline-block;\\n    background-color:rgb(32, 32, 58);\\n    text-align: center;\\n    border-radius: 5px;\\n  }\\n\\n@media screen and (max-width: 980px) {\\n    .align_center[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 95%;\\n    }\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWixjQUFjO0lBQ2QsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFNBQVM7SUFDVCxZQUFZO0FBQ2hCOztBQUNBO0lBQ0k7SUFDQSxTQUFTO0lBQ1Q7QUFDSjs7QUFFQSxnQkFBZ0I7O0FBQ1osZ0JBQWdCOztBQUNwQixNQUFNOztBQUVOO0lBQ0kscUJBQXFCO0lBQ3JCLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsWUFBWTtJQUNaOytCQUMyQjtJQUMzQixtQkFBbUI7SUFDbkIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLGNBQWM7SUFDZCxlQUFlO0lBQ2YsVUFBVTtJQUNWLGdDQUFnQztJQUNoQyxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksWUFBWTtJQUNaLFNBQVM7SUFDVCxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFDQSxhQUFhLGlCQUFpQjtJQUMxQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsWUFBWTtJQUNaLG1CQUFtQjtJQUNuQix1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSxZQUFZO0VBQ2Q7O0FBRUY7SUFDSSxhQUFhO0lBQ2IsV0FBVztJQUNYLDZCQUE2QjtJQUM3QixxQkFBcUI7SUFDckIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLHFCQUFxQjtJQUNyQixnQ0FBZ0M7SUFDaEMsa0JBQWtCO0lBR2xCLGtCQUFrQjtFQUNwQjs7QUFFQTtJQUNFO0lBQ0EsVUFBVTtJQUNWO0VBQ0Y7O0FBRUE7Ozs7O0tBS0ciLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXNpemU6MjZweDtcbiAgICBwYWRkaW5nOiAxcHg7XG59XG5cbmlucHV0IHtcbiAgICB3aWR0aDo1MCU7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuQG1lZGlhICAobWF4LXdpZHRoOiAxMDAwcHgpe1xuICAgIGlucHV0IHtcbiAgICB3aWR0aDo5MCU7XG4gICAgfVxufVxuXG4vKiAjaW5wdXR0ZXh0eyAqL1xuICAgIC8qIHdpZHRoOiA1MCU7ICovXG4vKiB9ICovXG5cbiNjaXJjbGUge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBtYXJnaW46IDEwJSAxMHB4IDEwJSAxMHB4OyBcbiAgICB3aWR0aDogNTBweDtcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgLyogLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAyNXB4O1xuICAgIC1tb3otYm9yZGVyLXJhZGl1czogMjVweDsgKi9cbiAgICBib3JkZXItcmFkaXVzOiAyNXB4O1xuICAgIGJhY2tncm91bmQ6IGJsYWNrO1xufVxuXG5mb290ZXJ7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwb3NpdGlvbjpmaXhlZDtcbiAgICBmb250LXNpemU6MC44dnc7XG4gICAgYm90dG9tOjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYigzMiwgMzIsIDU4KTtcbiAgICB3aWR0aDoxMDAlO1xufVxuXG5jYW52YXMgeyBcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTtcbn1cblxuYnV0dG9ue1xuICAgIGhlaWdodDogNDBweDtcbiAgICB3aWR0aDozMCU7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuXG5pbnB1dHtcbiAgICBmb250LXNpemU6IDIwcHQ7XG59XG4uYWxpZ25fcmlnaHR7bWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4uaW5wdXRmb3Jte1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgcGFkZGluZy10b3A6IDQwcHg7XG4gICAgei1pbmRleDogMjtcbn1cblxuLmFsaWduX2NlbnRlcntcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1heC13aWR0aDogMTAwMHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uZmlsbGVyIHtcbiAgICBmbGV4LWdyb3c6IDE7XG4gIH1cblxuI2FsaWduX2xlZnR7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjpib3R0b207XG4gICAgYWxpZ24taXRlbXM6IGxlZnQ7XG59XG5cbi5hbGlnbl9jZW50ZXIgZGl2e1xuICAgIHdpZHRoOiA2MCU7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGJhY2tncm91bmQtY29sb3I6cmdiKDMyLCAzMiwgNTgpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIH1cblxuICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5ODBweCkge1xuICAgIC5hbGlnbl9jZW50ZXIgZGl2e1xuICAgIHdpZHRoOiA5NSU7XG4gICAgfVxuICB9XG5cbiAgLyogI2JhY2tncm91bmRnaWYgeyBcbiAgICBiYWNrZ3JvdW5kLWltYWdlOnVybChcIi4uL2Fzc2V0cy9iYWNrZ3JvdW5kLmdpZlwiKTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDpyZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOmNvdmVyO1xuICAgIHBhZGRpbmctbGVmdDogMjBweDsgXG4gIH0gKi9cbiAgIl19 */\"]\n});","map":{"version":3,"sources":["/home/a/Desktop/dev/navylights/src/app/app.component.ts"],"names":["FormControl","startWith","map","i0","i1","i2","i3","i4","i5","i6","_c0","_c1","_c2","AppComponent_mat_option_15_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","option_r5","$implicit","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate1","Light","constructor","color","timeOn","FlashCount","list","sumFlash","reduce","sum","cur","AppComponent","cookieService","http","title","navytext","tmpText","showing","cookiesLights","defaultLights","navyTextControl","showRainControl","lightRadiusControl","rainDrops","initRain","qtRainDrops","w","window","innerWidth","h","innerHeight","a","x","Math","random","y","l","xs","ys","startRain","value","rainInterval","setInterval","drawRain","stopRain","clearInterval","onRainCheck","clearRect","c","length","p","lineWidth","strokeStyle","beginPath","moveTo","lineTo","fill","stroke","b","ngOnInit","canvas","nativeElement","getContext","width","height","setValue","i","putCookie","filteredCookiesLights","valueChanges","pipe","_filter","filterValue","toUpperCase","filter","includes","onStop","enable","onClear","showError","text","errortext","innerHTML","blink","delay","navylight","style","background","ms","Promise","resolve","setTimeout","putLog","serie","serieText","substr","replace","round","encodeURIComponent","get","location","href","responseType","subscribe","data","console","log","show","disable","getColor","colorMap","Map","set","colorList","Array","cutLeadingSeparators","z","keys","pos","indexOf","colorSort","entries","sort","push","getPeriod","period","endsWith","lo","test","parseFloat","getFlashType","flashTypes","key","startsWith","ec","listString","JSON","parse","_a","stringify","getFlashCount","flashCount","countStr","split","parseInt","pushNextLight","lastLightList","listOfLights","light","getListOfColors","getListOfGroups","pop","getListOfLights","reTypesOfLights","forEach","element","match","lightString","reColors","listOfColors","listOfGroups","reGroups","newOnShow","trim","tmpNavyText","rePeriod","isPeriod","el","lightType","onShow","ra","borderRadius","flashValue","ltTime","ecTime","realEcTime","realLtTime","totalLong","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","CookieService","HttpClient","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","AppComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","template","AppComponent_Template","ɵɵelement","ɵɵtemplate","ɵɵpipe","ɵɵlistener","AppComponent_Template_button_click_18_listener","AppComponent_Template_button_click_20_listener","AppComponent_Template_button_click_22_listener","AppComponent_Template_input_click_29_listener","_r2","ɵɵreference","ɵɵpipeBind1","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","MatAutocompleteTrigger","NgControlStatus","FormControlDirective","MatAutocomplete","NgForOf","CheckboxControlValueAccessor","MinValidator","MaxValidator","NumberValueAccessor","RequiredValidator","MatOption","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { FormControl } from '@angular/forms';\nimport { startWith, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-cookie-service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/autocomplete\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/core\";\nconst _c0 = [\"canvas\"];\nconst _c1 = [\"navylight\"];\nconst _c2 = [\"errortext\"];\nfunction AppComponent_mat_option_15_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const option_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r5, \" \");\n} }\n// import * as jison from \"jison\";\nclass Light {\n    constructor(color, timeOn) {\n        this.color = color;\n        this.timeOn = timeOn;\n    }\n}\nclass FlashCount {\n    constructor() {\n        this.list = [];\n    }\n    sumFlash() {\n        return this.list.reduce((sum, cur) => sum + cur, 0);\n    }\n}\nexport class AppComponent {\n    constructor(cookieService, http) {\n        this.cookieService = cookieService;\n        this.http = http;\n        this.title = 'navylights';\n        this.navytext = '';\n        this.tmpText = \"\";\n        this.showing = \"\";\n        this.cookiesLights = [];\n        this.defaultLights = [\n            'VQ(6)LFL10S',\n            'VQ(9)10S',\n            'VQ(3)5S',\n            'VQ',\n            'ALWRW4S',\n            'Iso W 6s ',\n            'Fl (1+4+3)W 45s',\n            'Fl(1+2)R',\n            'FL(2)5S',\n            'VQ(2+1)',\n            'ALWR4S'\n        ];\n        this.navyTextControl = new FormControl();\n        this.showRainControl = new FormControl();\n        this.lightRadiusControl = new FormControl();\n        this.rainDrops = [];\n    }\n    initRain() {\n        var qtRainDrops = 300;\n        var w = window.innerWidth;\n        var h = window.innerHeight;\n        for (var a = 0; a < qtRainDrops; a++) {\n            this.rainDrops[a] = {\n                x: Math.random() * w,\n                y: Math.random() * h,\n                l: Math.random() * 3,\n                xs: -4 + Math.random() * 4 + 2,\n                ys: Math.random() * 10 + 10\n            };\n        }\n    }\n    startRain() {\n        if (this.showRainControl.value === true) {\n            this.rainInterval = setInterval(() => {\n                this.drawRain();\n            }, 30);\n        }\n    }\n    stopRain() {\n        clearInterval(this.rainInterval);\n    }\n    onRainCheck() {\n        var w = window.innerWidth;\n        var h = window.innerHeight;\n        this.ctx.clearRect(0, 0, w, h);\n        // if (this.showRainControl.value === true && this.showing === \"Yes\"){\n        //   this.startRain();\n        // }\n    }\n    drawRain() {\n        var w = window.innerWidth;\n        var h = window.innerHeight;\n        this.ctx.clearRect(0, 0, w, h);\n        for (var c = 0; c < this.rainDrops.length; c++) {\n            var p = this.rainDrops[c];\n            // this.ctx.fillStyle = \"white\"\n            // this.ctx.fillRect(p.x, p.y, 5, 5)\n            this.ctx.lineWidth = 2;\n            this.ctx.strokeStyle = \"white\";\n            this.ctx.beginPath();\n            this.ctx.moveTo(p.x, p.y);\n            this.ctx.lineTo(p.x + p.l * p.xs, p.y + p.l * p.ys);\n            this.ctx.fill();\n            this.ctx.stroke();\n        }\n        // Move drops\n        for (var b = 0; b < this.rainDrops.length; b++) {\n            var p = this.rainDrops[b];\n            p.x += p.xs;\n            p.y += p.ys;\n            if (p.x > w || p.y > h) {\n                p.x = Math.random() * w;\n                p.y = -20;\n            }\n        }\n    }\n    ngOnInit() {\n        this.ctx = this.canvas.nativeElement.getContext(\"2d\");\n        this.canvas.nativeElement.width = window.innerWidth;\n        this.canvas.nativeElement.height = window.innerHeight;\n        this.initRain();\n        this.navyTextControl.setValue(this.defaultLights[0]);\n        this.navyTextControl.setValue(\"VQRY(6+2)LFlBUOR(3+1). 10s\");\n        this.lightRadiusControl.setValue(25);\n        for (let i = 0; i < this.defaultLights.length; i++) {\n            this.navytext = this.defaultLights[i];\n            this.putCookie();\n        }\n        this.filteredCookiesLights = this.navyTextControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\n    }\n    _filter(value) {\n        const filterValue = value.toUpperCase();\n        return this.cookiesLights.filter(cookiesLights => cookiesLights.includes(filterValue));\n    }\n    onStop() {\n        this.stopRain();\n        this.showing = \"\";\n        this.navyTextControl.enable();\n        this.lightRadiusControl.enable();\n        this.showRainControl.enable();\n    }\n    onClear() {\n        this.showing = \"\";\n        this.navyTextControl.setValue(\"\");\n        this.showError(\"\");\n    }\n    showError(text) {\n        this.errortext.nativeElement.innerHTML = text;\n    }\n    async blink(color, delay = 0) {\n        this.navylight.nativeElement.style.background = color;\n        await this.delay(delay);\n    }\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    putLog(serie) {\n        var serieText = \"[\" + this.navytext + \"]\";\n        for (let x = 0; x < serie.length; x++) {\n            serieText = serieText +\n                serie[x].color.substr(0, 3).replace(\"bla\", \"ec\") + \":\" + Math.round(serie[x].timeOn) / 1000 + \",\";\n        }\n        // console.log(serieText);\n        serieText = encodeURIComponent(serieText);\n        this.http.get(window.location.href + \"/log/?log=\" +\n            serieText, { responseType: 'blob' }).subscribe(data => { console.log(\"\"); });\n    }\n    // show lights\n    async show(serie) {\n        this.putCookie();\n        this.putLog(serie);\n        this.showing = \"Yes\";\n        this.navyTextControl.disable();\n        this.lightRadiusControl.disable();\n        this.showRainControl.disable();\n        // console.log(serie);\n        this.startRain();\n        while (this.showing === \"Yes\") {\n            for (let x = 0; x < serie.length; x++) {\n                console.log(x, serie[x]);\n                await this.blink(serie[x].color, serie[x].timeOn);\n                if (this.showing != \"Yes\")\n                    break;\n            }\n            console.log(\"end of serie\");\n            if (this.showing != \"Yes\")\n                break;\n        }\n        this.blink(\"black\", 1);\n    }\n    getColor() {\n        let colorMap = new Map();\n        colorMap.set(\"Y\", \"yellow\");\n        colorMap.set(\"OR\", \"orange\");\n        colorMap.set(\"W\", \"white\");\n        colorMap.set(\"R\", \"red\");\n        colorMap.set(\"G\", \"green\");\n        colorMap.set(\"BU\", \"blue\");\n        colorMap.set(\"VI\", \"violet\");\n        let colorList = new Map();\n        let color = new Array();\n        this.cutLeadingSeparators();\n        //make colors sequence\n        let z = [...colorMap.keys()];\n        for (let i = 0; i < z.length; i++) {\n            var pos = 0;\n            while (this.tmpText.indexOf(z[i], pos) >= 0) {\n                colorList.set(this.tmpText.indexOf(z[i], pos), z[i]);\n                pos = this.tmpText.indexOf(z[i], pos) + 1;\n            }\n        }\n        //remove colors\n        this.tmpText = this.tmpText.replace(/Y/gi, \"\");\n        this.tmpText = this.tmpText.replace(/OR/gi, \"\");\n        this.tmpText = this.tmpText.replace(/W/gi, \"\");\n        this.tmpText = this.tmpText.replace(/R/gi, \"\");\n        this.tmpText = this.tmpText.replace(/G/gi, \"\");\n        this.tmpText = this.tmpText.replace(/BU/gi, \"\");\n        this.tmpText = this.tmpText.replace(/VI/gi, \"\");\n        //sort \n        var colorSort = [...colorList.entries()].sort();\n        for (let i = 0; i < colorSort.length; i++) {\n            color.push(colorMap.get(colorSort[i][1]));\n            if (colorSort[i][1] === \"OR\")\n                i++;\n        }\n        if (color.length === 0) {\n            color.push(\"white\");\n        }\n        return color;\n    }\n    getPeriod() {\n        let period = 0;\n        this.cutLeadingSeparators();\n        if (this.tmpText.endsWith(\"S\")) {\n            this.tmpText = this.tmpText.substr(0, this.tmpText.length - 1);\n            var lo = \"\";\n            while (/^\\d+$/.test(this.tmpText[this.tmpText.length - 1]) ||\n                this.tmpText[this.tmpText.length - 1] === '.') {\n                if (this.tmpText[this.tmpText.length - 1] === \".\") {\n                    lo = this.tmpText[this.tmpText.length - 1] + lo;\n                }\n                this.tmpText = this.tmpText.substr(0, this.tmpText.length - 1);\n            }\n            if (lo != \"\") {\n                period = parseFloat(lo) * 1000;\n            }\n        }\n        return period;\n    }\n    cutLeadingSeparators() {\n        while (\"+[.\\+] \".indexOf(this.tmpText[0]) >= 0) {\n            this.tmpText = this.tmpText.substr(1);\n        }\n    }\n    getFlashType() {\n        let flashTypes = new Map();\n        flashTypes.set(\"Q\", 750);\n        flashTypes.set(\"FL\", 1200);\n        flashTypes.set(\"LFL\", 2000);\n        flashTypes.set(\"L.FL\", 2000);\n        flashTypes.set(\"VQ\", 600);\n        flashTypes.set(\"V.Q\", 600);\n        flashTypes.set(\"UQ\", 320);\n        flashTypes.set(\"U.Q\", 320);\n        flashTypes.set(\"OC\", 3000);\n        flashTypes.set(\"ISO\", 1000);\n        flashTypes.set(\"AL\", 1000);\n        flashTypes.set(\"F\", 1234);\n        this.cutLeadingSeparators();\n        // alert(\"-\"+this.tmpText)\n        for (let [key, value] of flashTypes) {\n            // console.log(key)\n            if (this.tmpText.startsWith(key)) {\n                this.tmpText = this.tmpText.substr((\"\" + key).length);\n                // alert(\"!\"+this.tmpText)\n                // console.log(\"found key\"+key+\"-\"+this.tmpText)\n                var ec = value * 2;\n                if (key === \"OC\")\n                    ec = value / 4;\n                if (key === \"ISO\" || key === \"AL\")\n                    ec = value;\n                return [value, ec];\n            }\n        }\n        // console.log(\"==\" + this.tmpText)\n        this.tmpText = this.tmpText.substr(1);\n        return [0, 0];\n    }\n    putCookie() {\n        let list = [];\n        var listString = this.cookieService.get(\"navylights\");\n        try {\n            list = JSON.parse(listString);\n            this.cookiesLights = list;\n        }\n        catch (_a) {\n        }\n        if (this.navytext != \"\" && list.indexOf(this.navytext) < 0) {\n            list.push(this.navytext);\n            this.cookieService.set(\"navylights\", JSON.stringify(list), 60, \"/\");\n            this.cookiesLights = list;\n        }\n    }\n    getFlashCount() {\n        let flashCount = new FlashCount();\n        if (this.tmpText.startsWith(\"(\")) {\n            var countStr = this.tmpText.substr(1, this.tmpText.indexOf(\")\") - 1);\n            if (countStr.indexOf(\")\") >= 0) {\n                this.showError(\"It has ( but does not have )\");\n                return flashCount;\n            }\n            else if (countStr === \"\") {\n                flashCount.list.push(1);\n            }\n            else {\n                for (var x = 0; x < countStr.split(\"+\").length; x++) {\n                    flashCount.list.push(parseInt(countStr.split(\"+\")[x]));\n                }\n                this.tmpText = this.tmpText.substr(this.tmpText.indexOf(\")\") + 1);\n            }\n        }\n        else {\n            flashCount.list.push(1);\n        }\n        return flashCount;\n    }\n    pushNextLight(lastLightList, listOfLights) {\n        if (lastLightList.length != 0) {\n            let light = new Map();\n            light.set(\"lightType\", lastLightList[0]);\n            light.set(\"lightColors\", this.getListOfColors(lastLightList));\n            light.set(\"lightGroups\", this.getListOfGroups(lastLightList));\n            listOfLights.push(light);\n            while (lastLightList.length != 0) { //clear list\n                lastLightList.pop();\n            }\n        }\n    }\n    getListOfLights(tmpText) {\n        var reTypesOfLights = /(LFL|FL|OC|ISO|Al|VQ|UQ|HQ)/;\n        var listOfLights = [];\n        var lastLightList = [];\n        function pushNextLight() {\n            if (lastLightList.length != 0) {\n                listOfLights.push([lastLightList[0]]);\n                lastLightList = [];\n            }\n        }\n        tmpText.split(reTypesOfLights).forEach(element => {\n            if (element != \"\") {\n                if (element.match(reTypesOfLights)) {\n                    this.pushNextLight(lastLightList, listOfLights);\n                }\n                lastLightList.push(element);\n            }\n        });\n        this.pushNextLight(lastLightList, listOfLights);\n        return listOfLights;\n    }\n    getListOfColors(lightString) {\n        var reColors = /(W|R|G|Y|OR|BU)/;\n        var listOfColors = [];\n        let colorMap = new Map();\n        colorMap.set(\"Y\", \"yellow\");\n        colorMap.set(\"OR\", \"orange\");\n        colorMap.set(\"W\", \"white\");\n        colorMap.set(\"R\", \"red\");\n        colorMap.set(\"G\", \"green\");\n        colorMap.set(\"BU\", \"blue\");\n        colorMap.set(\"VI\", \"violet\");\n        if (lightString.length < 2) { //Single light? no color, no groups\n            // return listOfColors;\n            return [\"white\"];\n        }\n        lightString[1].split(reColors).forEach(element => {\n            if (element.match(reColors)) {\n                listOfColors.push(colorMap.get(element));\n            }\n        });\n        return listOfColors;\n    }\n    getListOfGroups(lightString) {\n        var listOfGroups = [];\n        var reGroups = /(\\b\\d+\\b)/;\n        if (lightString.length < 2) { //Single light? no color, no groups\n            return listOfGroups;\n        }\n        lightString[1].split(reGroups).forEach(element => {\n            if (element.match(reGroups)) {\n                listOfGroups.push(element);\n            }\n        });\n        return listOfGroups;\n    }\n    newOnShow() {\n        this.navytext = this.navyTextControl.value.trim().toUpperCase();\n        var tmpNavyText = this.navytext.replace(/\\s/, \"\").replace(/\\./, \"\");\n        let serie = [];\n        //Get period\n        var period = \"\";\n        const rePeriod = /[0-9]*S$/;\n        var isPeriod = tmpNavyText.match(rePeriod);\n        if (isPeriod != null) {\n            period = isPeriod[0];\n            tmpNavyText = tmpNavyText.replace(rePeriod, \"\");\n        }\n        // Split to lights\n        var listOfLights = this.getListOfLights(tmpNavyText);\n        //Build tree of lights\n        listOfLights.forEach(el => {\n            console.log(el.lightType);\n            // serie.push(new Light(color[i], ltTime));\n            // serie.push(new Light(\"black\", ltTime));\n        });\n        console.log(period);\n    }\n    // Show button pressed\n    onShow() {\n        this.newOnShow();\n        return;\n        let ra = this.lightRadiusControl.value;\n        this.navylight.nativeElement.style.borderRadius = ra + \"px\";\n        this.navylight.nativeElement.style.width = 2 * ra + \"px\";\n        this.navylight.nativeElement.style.height = 2 * ra + \"px\";\n        let serie = [];\n        let color = [];\n        let flashValue = [];\n        let flashCount = new FlashCount();\n        this.navytext = this.navyTextControl.value.trim().toUpperCase();\n        this.tmpText = this.navytext.replace(/\\s/g, \"\").replace(/\\./g, \"\");\n        this.showError(\"\");\n        var period = this.getPeriod();\n        //parse until empty string\n        while (this.tmpText != \"\") {\n            //for every non first section - duplicate period of black\n            if (serie.length > 0) {\n                serie.push(serie[serie.length - 1]);\n            }\n            // console.log(this.tmpText);\n            flashValue = this.getFlashType();\n            if (flashValue[0] === 0 && flashValue[0] === 0) {\n                this.showError(\"Bad Light characteristic\" + this.tmpText);\n                return;\n            }\n            // console.log(flashValue);\n            var ltTime = flashValue[0];\n            var ecTime = flashValue[1];\n            if (ltTime === 0) {\n                continue;\n            }\n            flashCount = this.getFlashCount();\n            // console.log(flashCount);\n            if (color.length === 0) {\n                color = this.getColor();\n            }\n            // alert(flashCount.list.length);\n            // AL lights\n            if (this.navytext.startsWith(\"AL\") && color.length > 1) {\n                for (let z = 0; z < flashCount.list[0]; z++) {\n                    for (let i = 0; i < color.length; i++) {\n                        serie.push(new Light(color[i], ltTime));\n                        serie.push(new Light(\"black\", ltTime));\n                    }\n                }\n            }\n            //fixed light\n            else if (ltTime === 1234) {\n                serie.push(new Light(color[0], ltTime));\n            }\n            //Regular lights\n            else {\n                var realEcTime = ecTime;\n                var realLtTime = ltTime;\n                flashCount.sumFlash();\n                for (var z = 0; z < flashCount.list.length; z++) {\n                    if (z > 0) { // works for (2+1) etc\n                        serie.push(new Light(\"black\", realEcTime * 2));\n                        if (ltTime > ecTime) { // for OC lights\n                            serie.push(new Light(\"black\", 2 * realEcTime));\n                        }\n                    }\n                    for (var i = 1; i <= flashCount.list[z]; i++) {\n                        serie.push(new Light(color[0], realLtTime));\n                        serie.push(new Light(\"black\", realEcTime / 3));\n                    }\n                }\n            }\n        }\n        // console.log(serie)\n        if (this.navytext.startsWith(\"ISO\") && period != 0 && serie.length === 2) {\n            serie[0].timeOn = serie[1].timeOn = period / 2;\n        }\n        else { //count total long of signals\n            var totalLong = 0;\n            serie.forEach(element => {\n                totalLong = totalLong + element.timeOn;\n            });\n            if (period != 0 && period < totalLong) {\n                // alert(\"Given period is less than total leght of signal\");\n                this.showError(\"The given period is less than the total length of signals\");\n                return;\n            }\n            // if flashCount.sumFlash()>0 - must be a period\n            if (flashCount.sumFlash() > 1 && period == 0) {\n                period = totalLong * 1.5;\n            }\n            if (period > 0 && period <= totalLong) { //serie too long - make it shorter\n                serie.forEach(element => {\n                    element.timeOn = element.timeOn / (totalLong / (period / 2));\n                });\n                totalLong = totalLong / (totalLong / (period / 2));\n            }\n            if (period === 0 && serie.length > 2) { //no period = fake period\n                period = totalLong;\n            }\n            if (period > totalLong) { // append ec for period time\n                serie.push(new Light(\"black\", period - totalLong));\n            }\n        }\n        // show serie\n        if (serie.length > 0) {\n            this.show(serie);\n        }\n    }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.CookieService), i0.ɵɵdirectiveInject(i2.HttpClient)); };\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], viewQuery: function AppComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.navylight = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.errortext = _t.first);\n    } }, decls: 39, vars: 10, consts: [[\"id\", \"backgroundgif\"], [\"canvas\", \"\"], [1, \"align_center\"], [\"id\", \"circle\"], [\"navylight\", \"\"], [1, \"inputform\"], [\"type\", \"text\", \"id\", \"inputtext\", \"name\", \"navy\", \"size\", \"18\", 3, \"formControl\", \"matAutocomplete\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"disabled\", \"click\"], [\"id\", \"align_left\"], [\"for\", \"showrain\", \"size\", \"18\", 2, \"width\", \"1000px\"], [\"type\", \"checkbox\", \"id\", \"showrain\", \"name\", \"showrain\", \"size\", \"18\", 3, \"formControl\", \"click\"], [1, \"filler\"], [\"size\", \"18\", 2, \"width\", \"1000px\"], [\"type\", \"number\", \"min\", \"5\", \"max\", \"150\", \"required\", \"\", 3, \"formControl\"], [2, \"color\", \"red\", \"font-size\", \"large\"], [\"errortext\", \"\"], [1, \"align_right\"], [3, \"value\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\", 0);\n        i0.ɵɵelement(1, \"canvas\", null, 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelement(4, \"div\", 3, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"form\");\n        i0.ɵɵtext(9, \" Light characteristic: \");\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵelement(11, \"br\");\n        i0.ɵɵelement(12, \"input\", 6);\n        i0.ɵɵelementStart(13, \"mat-autocomplete\", null, 7);\n        i0.ɵɵtemplate(15, AppComponent_mat_option_15_Template, 2, 2, \"mat-option\", 8);\n        i0.ɵɵpipe(16, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"br\");\n        i0.ɵɵelementStart(18, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_18_listener() { return ctx.onShow(); });\n        i0.ɵɵtext(19, \"Show\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_20_listener() { return ctx.onClear(); });\n        i0.ɵɵtext(21, \"Clear\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_22_listener() { return ctx.onStop(); });\n        i0.ɵɵtext(23, \"Stop\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"br\");\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵelementStart(26, \"div\", 10);\n        i0.ɵɵelementStart(27, \"label\", 11);\n        i0.ɵɵtext(28, \"Show rain\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"input\", 12);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_input_click_29_listener() { return ctx.onRainCheck(); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"div\", 13);\n        i0.ɵɵelementStart(31, \"label\", 14);\n        i0.ɵɵtext(32, \"Radius of light\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"div\", 16, 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"footer\");\n        i0.ɵɵelementStart(37, \"div\", 18);\n        i0.ɵɵtext(38, \" \\u00A9 2021 Andrei Puchko \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r2 = i0.ɵɵreference(14);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"formControl\", ctx.navyTextControl)(\"matAutocomplete\", _r2);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(16, 8, ctx.filteredCookiesLights));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.showing != \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.showing != \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.showing === \"\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"formControl\", ctx.showRainControl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formControl\", ctx.lightRadiusControl);\n    } }, directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i4.MatAutocompleteTrigger, i3.NgControlStatus, i3.FormControlDirective, i4.MatAutocomplete, i5.NgForOf, i3.CheckboxControlValueAccessor, i3.MinValidator, i3.MaxValidator, i3.NumberValueAccessor, i3.RequiredValidator, i6.MatOption], pipes: [i5.AsyncPipe], styles: [\"body[_ngcontent-%COMP%] {\\n    background-color:black;\\n    color: white;\\n    font-size:26px;\\n    padding: 1px;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n    width:50%;\\n    margin: 10px;\\n}\\n\\n@media  (max-width: 1000px){\\n    input[_ngcontent-%COMP%] {\\n    width:90%;\\n    }\\n}\\n\\n\\n\\n\\n\\n\\n\\n#circle[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    margin: 10% 10px 10% 10px; \\n    width: 50px;\\n    height: 50px;\\n    \\n    border-radius: 25px;\\n    background: black;\\n}\\n\\nfooter[_ngcontent-%COMP%]{\\n    display: flex;\\n    position:fixed;\\n    font-size:0.8vw;\\n    bottom:0px;\\n    background-color:rgb(32, 32, 58);\\n    width:100%;\\n}\\n\\ncanvas[_ngcontent-%COMP%] { \\n    position: absolute;\\n    z-index: 1;\\n}\\n\\nbutton[_ngcontent-%COMP%]{\\n    height: 40px;\\n    width:30%;\\n    margin: 10px;\\n}\\n\\ninput[_ngcontent-%COMP%]{\\n    font-size: 20pt;\\n}\\n\\n.align_right[_ngcontent-%COMP%]{margin-left: auto;\\n    margin-right: 15px;\\n}\\n\\n.inputform[_ngcontent-%COMP%]{\\n    padding: 20px;\\n    padding-top: 40px;\\n    z-index: 2;\\n}\\n\\n.align_center[_ngcontent-%COMP%]{\\n    display: flex;\\n    max-width: 1000px;\\n    margin: auto;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.filler[_ngcontent-%COMP%] {\\n    flex-grow: 1;\\n  }\\n\\n#align_left[_ngcontent-%COMP%]{\\n    display: flex;\\n    width: 100%;\\n    justify-content: space-around;\\n    vertical-align:bottom;\\n    align-items: left;\\n}\\n\\n.align_center[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 60%;\\n    display: inline-block;\\n    background-color:rgb(32, 32, 58);\\n    text-align: center;\\n    border-radius: 5px;\\n  }\\n\\n@media screen and (max-width: 980px) {\\n    .align_center[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 95%;\\n    }\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWixjQUFjO0lBQ2QsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFNBQVM7SUFDVCxZQUFZO0FBQ2hCOztBQUNBO0lBQ0k7SUFDQSxTQUFTO0lBQ1Q7QUFDSjs7QUFFQSxnQkFBZ0I7O0FBQ1osZ0JBQWdCOztBQUNwQixNQUFNOztBQUVOO0lBQ0kscUJBQXFCO0lBQ3JCLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsWUFBWTtJQUNaOytCQUMyQjtJQUMzQixtQkFBbUI7SUFDbkIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLGNBQWM7SUFDZCxlQUFlO0lBQ2YsVUFBVTtJQUNWLGdDQUFnQztJQUNoQyxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksWUFBWTtJQUNaLFNBQVM7SUFDVCxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFDQSxhQUFhLGlCQUFpQjtJQUMxQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsWUFBWTtJQUNaLG1CQUFtQjtJQUNuQix1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSxZQUFZO0VBQ2Q7O0FBRUY7SUFDSSxhQUFhO0lBQ2IsV0FBVztJQUNYLDZCQUE2QjtJQUM3QixxQkFBcUI7SUFDckIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLHFCQUFxQjtJQUNyQixnQ0FBZ0M7SUFDaEMsa0JBQWtCO0lBR2xCLGtCQUFrQjtFQUNwQjs7QUFFQTtJQUNFO0lBQ0EsVUFBVTtJQUNWO0VBQ0Y7O0FBRUE7Ozs7O0tBS0ciLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXNpemU6MjZweDtcbiAgICBwYWRkaW5nOiAxcHg7XG59XG5cbmlucHV0IHtcbiAgICB3aWR0aDo1MCU7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuQG1lZGlhICAobWF4LXdpZHRoOiAxMDAwcHgpe1xuICAgIGlucHV0IHtcbiAgICB3aWR0aDo5MCU7XG4gICAgfVxufVxuXG4vKiAjaW5wdXR0ZXh0eyAqL1xuICAgIC8qIHdpZHRoOiA1MCU7ICovXG4vKiB9ICovXG5cbiNjaXJjbGUge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBtYXJnaW46IDEwJSAxMHB4IDEwJSAxMHB4OyBcbiAgICB3aWR0aDogNTBweDtcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgLyogLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAyNXB4O1xuICAgIC1tb3otYm9yZGVyLXJhZGl1czogMjVweDsgKi9cbiAgICBib3JkZXItcmFkaXVzOiAyNXB4O1xuICAgIGJhY2tncm91bmQ6IGJsYWNrO1xufVxuXG5mb290ZXJ7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwb3NpdGlvbjpmaXhlZDtcbiAgICBmb250LXNpemU6MC44dnc7XG4gICAgYm90dG9tOjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYigzMiwgMzIsIDU4KTtcbiAgICB3aWR0aDoxMDAlO1xufVxuXG5jYW52YXMgeyBcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTtcbn1cblxuYnV0dG9ue1xuICAgIGhlaWdodDogNDBweDtcbiAgICB3aWR0aDozMCU7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuXG5pbnB1dHtcbiAgICBmb250LXNpemU6IDIwcHQ7XG59XG4uYWxpZ25fcmlnaHR7bWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xufVxuXG4uaW5wdXRmb3Jte1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgcGFkZGluZy10b3A6IDQwcHg7XG4gICAgei1pbmRleDogMjtcbn1cblxuLmFsaWduX2NlbnRlcntcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIG1heC13aWR0aDogMTAwMHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uZmlsbGVyIHtcbiAgICBmbGV4LWdyb3c6IDE7XG4gIH1cblxuI2FsaWduX2xlZnR7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjpib3R0b207XG4gICAgYWxpZ24taXRlbXM6IGxlZnQ7XG59XG5cbi5hbGlnbl9jZW50ZXIgZGl2e1xuICAgIHdpZHRoOiA2MCU7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGJhY2tncm91bmQtY29sb3I6cmdiKDMyLCAzMiwgNTgpO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIH1cblxuICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5ODBweCkge1xuICAgIC5hbGlnbl9jZW50ZXIgZGl2e1xuICAgIHdpZHRoOiA5NSU7XG4gICAgfVxuICB9XG5cbiAgLyogI2JhY2tncm91bmRnaWYgeyBcbiAgICBiYWNrZ3JvdW5kLWltYWdlOnVybChcIi4uL2Fzc2V0cy9iYWNrZ3JvdW5kLmdpZlwiKTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDpyZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1zaXplOmNvdmVyO1xuICAgIHBhZGRpbmctbGVmdDogMjBweDsgXG4gIH0gKi9cbiAgIl19 */\"] });\n"]},"metadata":{},"sourceType":"module"}